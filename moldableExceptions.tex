% Modeled after sample-sigplan.tex
\documentclass[sigplan,anonymous,review,10pt]{acmart}
%% \BibTeX command to typeset BibTeX logo in the docs
\AtBeginDocument{%
  \providecommand\BibTeX{{%
    Bib\TeX}}}
\setcopyright{acmlicensed}
\copyrightyear{2018}
\acmYear{2018}
\acmDOI{XXXXXXX.XXXXXXX}
%% These commands are for a PROCEEDINGS abstract or paper.
\acmConference[Onward!]{Onward!}{Oct. 20-25, 2024}{Pasadena, CA}
\acmISBN{978-1-4503-XXXX-X/18/06}
% ============================================================
\input{macros}
\input{st80.tex}
% ============================================================
% Macros for this paper
%\renewcommand{\nbc}[3]{} % To hide reviewer comments
\newcommand\on[1]{\nbc{ON}{#1}{olive}} % add more author macros here
\newcommand\tg[1]{\nbc{TG}{#1}{blue}}
%\newcommand\XXX[1]{\nbc{XXX}{#1}{red}}
%\newcommand\XXX[1]{\nbc{XXX}{#1}{teal}}
%\newcommand\XXX[1]{\nbc{XXX}{#1}{violet}}
\usepackage{caption}
\captionsetup{aboveskip=5pt,belowskip=-10pt} % Adjust the space around figure captions
%\usepackage{enumitem}
%\setlist[description]{font=\itshape}
\newcommand{\GT}{\lst{GT}\xspace} % In case we want to display it differently ...
% ============================================================
% Optionally anonymize selected names
\newboolean{anonymous}
\setboolean{anonymous}{true}
\newcommand\anonymize[2]{\ifthenelse{\boolean{anonymous}}{#2}{#1}\xspace}
\newcommand\feenk{\anonymize{feenk}{anonymous company}}
% ============================================================
\begin{document}
\title{Moldable Exceptions}
\author{Andrei Chi\c{s}}
\affiliation{%
  \institution{feenk gmbh}
  \city{Wabern}
  \country{Switzerland}}
\email{andrei.chis@feenk.com}
%\author{Tudor G\^irba}
%\affiliation{%
%  \institution{feenk gmbh}
%  \city{Wabern}
%  \country{Switzerland}}
%\email{tudor.girba@feenk.com}
\author{Oscar Nierstrasz}
\affiliation{%
  \institution{feenk gmbh}
  \city{Wabern}
  \country{Switzerland}}
\email{oscar.nierstrasz@feenk.com}

\renewcommand{\shortauthors}{Chi\c{s} et al.}

\begin{abstract}
\todo{DRAFT}
Debugging is hard.
All debuggers are the same.
They show you a stack, a way to sample the state of the stack, and, if the debugger is live, a way to step through execution.
Exceptions are always raised in a specific context.
We can exploit this context to show more useful information when debugging.
Moldable exceptions offer a lightweight mechanism to adapt a moldable debugger to the specific context of the exception raised to show more useful views and actions to a developer.
We present, through a series of examples, how moldable exceptions can be added to a live programming environment.
\end{abstract}


\keywords{\todo{}}

%\received{20 February 2007}
%\received[revised]{12 March 2009}
%\received[accepted]{5 June 2009}

\maketitle

% ============================================================
\section{Introduction}\label{sec:intro}

\todo{Just a rough outline --- text to be rewritten}

In the bad old days, all debuggers were the same.
You had commands to sample the current execution state, and you had commands to step through the running code.
Nowadays we have graphical debuggers that show us the run-time stack, and offer buttons instead of commands to step through the code, but they are still all the same.
The trouble with this is that every debugging problem is different, but debuggers all show us the same thing.

What if the debugger were to be aware of the kind of exception being raised, and instead of showing a generic debugger view, it would provide views and actions specific to the context of that exception?
This is what \emph{moldable exceptions} do.

\todo{Explain the example}

\begin{figure}[h]
  \includegraphics[width=\columnwidth]{stringComparisonSnippet}
  \caption{A failing string comparison assertion.}
  \label{fig:stringComparisonSnippet}
\end{figure}

\begin{figure}[h]
  \includegraphics[width=\columnwidth]{genericDebugger}
  \caption{A generic debugger view.}
  \label{fig:genericDebugger}
\end{figure}

\begin{figure}[h]
  \includegraphics[width=\columnwidth]{stringComparisonView}
  \caption{A string diff debugger view.}
  \label{fig:stringComparisonView}
\end{figure}

Moldable exceptions work as follows: when an exception is raised, the exception (an object) is caught and passed to the debugger.
Every exception not only provides the debugger with the context it needs to generate the debugging UI, but it can also offer alternative views and actions.
In the case of our implementation, this is achieved by the exception class providing specially annotated debugger extension methods.

This simple mechanism allows moldable exceptions to do three things:
\begin{inparaenum}[(i)]
	\item provide domain-specific debugging views and actions,
	\item offer new debugger GUI interactions, and
	\item enable automated fixes (code transformations) for common programming errors.
\end{inparaenum}    

\todo{add section overview}
In \autoref{sec:views} we will ...
\autoref{sec:interactions}
\autoref{sec:fixes}
\autoref{sec:directions}
We discuss related work in \autoref{sec:related}.
We conclude in \autoref{sec:conclusion}.

% ============================================================
\section{Adding views and actions}\label{sec:views}

\todo{
This should function like a mini-tutorial, where we add debugger views to an existing class.
We could use the Ludo game as a first example.
Then we proceed to the assertion diff example, which looks at the context.
}

% ============================================================
\section{Providing domain-specific debugger interactions}\label{sec:interactions}

\todo{
Collector views.
Mention other domains from the moldable debugger, such as event-driven apps and parsers?
}

% ============================================================
\section{Enabling automated fixes}\label{sec:fixes}

\todo{
Introduce the deprecation special case.
Demo the empty view fix example.
Discuss the LifeWare tests?
}

% ============================================================
\section{Future directions}\label{sec:directions}

\todo{
Providing views with access to the debugger context.
Moldable exceptions for other platforms -- what do you need?
}

% ============================================================
\section{Related work}\label{sec:related}

\todo{Expand this list}

Moldable Debugger
\cite{Chis15c}

On the Dichotomy of Debugging Behavior Among Programmers
\cite{Bell18a}
Online developer survey shows that IDE-provided debuggers are not used as often as expected.

A Simple and Extensible Graphical Debugger
\cite{Hans97a}
An early example of an extensible debugger

Grammar-Driven Generation of Domain-Specific Language Debuggers
\cite{HuiW08a}
Generating debuggers for DSLs from the grammar spec.

Declaratively Defining Domain-Specific Language Debuggers
\cite{Lind11a}
Using a high-level spec to define DSL debuggers


% ============================================================
\section{Conclusion}\label{sec:conclusion}

\todo{xxx}


%% The acknowledgments section is defined using the "acks" environment
%% (and NOT an unnumbered section).
%\begin{acks}
%To Robert, for the bagels and explaining CMYK and color spaces.
%\end{acks}

\bibliographystyle{ACM-Reference-Format}
\bibliography{moldableExceptions}


\end{document}
\endinput

